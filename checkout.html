<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Pitchpilot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <h1 class="text-2xl font-bold text-gray-800">Pitchpilot</h1>
                    <SearchBar />
                </div>
                <div class="flex items-center space-x-4">
                    <ProfileHeader />
                    <SettingsLink />
                    <OrderHistoryLink />
                    <PaymentManagerLink />
                    <LogoutButton />
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Bar -->
    <nav class='bg-gray-900 text-white p-4 flex space-x-4'>
        <a href='index.html' class='px-3 py-2 hover:text-blue-400'>Home</a>
        <a href='restaurant-menu.html' class='px-3 py-2 hover:text-blue-400'>Restaurant Menu</a>
        <a href='your-cart.html' class='px-3 py-2 hover:text-blue-400'>Your Cart</a>
        <a href='checkout.html' class='px-3 py-2 hover:text-blue-400'>Checkout</a>
        <a href='order-status.html' class='px-3 py-2 hover:text-blue-400'>Order Status</a>
        <a href='user-profile.html' class='px-3 py-2 hover:text-blue-400'>User Profile</a>
    </nav>

    <main class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Restaurant Header -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <RestaurantHeader />
                </div>

                <!-- Delivery Address -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold">Delivery Address</h2>
                        <AddressManagerLink />
                    </div>
                    <AddressSelector />
                    <EstimatedArrivalTime />
                </div>

                <!-- Payment Method -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-xl font-semibold mb-4">Payment Method</h2>
                    <PaymentMethodSelector />
                </div>

                <!-- Order Items -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-xl font-semibold mb-4">Your Order</h2>
                    <CartItemList />
                </div>

                <!-- Promo Code -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-xl font-semibold mb-4">Promo Code</h2>
                    <PromoCodeInput />
                </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-6">
                <!-- Order Summary -->
                <div class="bg-white rounded-lg shadow-sm p-6 sticky top-4">
                    <OrderSummary />
                    <div class="space-y-3 mt-6">
                        <PlaceOrderButton />
                        <ViewCartButton />
                        <SupportButton />
                    </div>
                </div>

                <!-- Live Map View -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-xl font-semibold mb-4">Delivery Tracking</h2>
                    <LiveMapView />
                    <OrderStatusTracker />
                </div>
            </div>
        </div>
    </main>

    <!-- Order Confirmation Modal -->
    <div id="confirmationModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md mx-4">
            <OrderConfirmationMessage />
        </div>
    </div>

    <script>
        // Initialize Feather Icons
        feather.replace();
        
        // Initialize AOS
        AOS.init();
        
        // Checkout functionality
        document.addEventListener('DOMContentLoaded', function() {
            const placeOrderButton = document.querySelector('[data-place-order]');
            const confirmationModal = document.getElementById('confirmationModal');
            
            if (placeOrderButton && confirmationModal) {
                placeOrderButton.addEventListener('click', function() {
                    confirmationModal.classList.remove('hidden');
                });
            }
            
            // Close modal when clicking outside
            confirmationModal.addEventListener('click', function(e) {
                if (e.target === confirmationModal) {
                    confirmationModal.classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>

<!-- Component Definitions -->
<script>
// Search Bar Component
class SearchBar extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <div class="relative">
                <input type="text" placeholder="Search restaurants or dishes..." 
                    class="w-64 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <i data-feather="search" class="absolute right-3 top-2.5 text-gray-400"></i>
            </div>
        `;
    }
}

// Profile Header Component
class ProfileHeader extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <div class="flex items-center space-x-2 cursor-pointer">
                <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white">
                    <i data-feather="user"></i>
                </div>
                <span class="text-gray-700">John Doe</span>
            </div>
        `;
    }
}

// Settings Link Component
class SettingsLink extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <a href="settings.html" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                <i data-feather="settings" class="text-gray-600"></i>
            </a>
        `;
    }
}

// Order History Link Component
class OrderHistoryLink extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <a href="order-history.html" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                <i data-feather="clock" class="text-gray-600"></i>
            </a>
        `;
    }
}

// Payment Manager Link Component
class PaymentManagerLink extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <a href="payment-methods.html" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                <i data-feather="credit-card" class="text-gray-600"></i>
            </a>
        `;
    }
}

// Logout Button Component
class LogoutButton extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <button class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                <i data-feather="log-out" class="text-gray-600"></i>
            </button>
        `;
    }
}

// Restaurant Header Component
class RestaurantHeader extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <div class="flex items-center space-x-4">
                <img src="https://via.placeholder.com/60" alt="Restaurant" class="w-15 h-15 rounded-lg">
                <div>
                    <h2 class="text-xl font-semibold">Italian Bistro</h2>
                    <p class="text-gray-600">⭐ 4.5 (250 reviews) • Italian • $$</p>
                    <p class="text-gray-500">15-25 min • 1.2 miles away</p>
                </div>
            </div>
        `;
    }
}

// Address Selector Component
class AddressSelector extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <div class="space-y-3">
                <div class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:border-blue-500">
                    <i data-feather="home" class="text-gray-400"></i>
                    <div>
                        <p class="font-medium">Home</p>
                        <p class="text-sm text-gray-600">123 Main St, Apt 4B, New York, NY 10001</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:border-blue-500">
                    <i data-feather="briefcase" class="text-gray-400"></i>
                    <div>
                        <p class="font-medium">Work</p>
                        <p class="text-sm text-gray-600">456 Office Ave, Floor 12, New York, NY 10002</p>
                    </div>
                </div>
            </div>
        `;
    }
}

// Estimated Arrival Time Component
class EstimatedArrivalTime extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                <p class="text-sm text-blue-800">
                    <i data-feather="clock" class="inline w-4 h-4 mr-1"></i>
                    Estimated arrival: <strong>25-35 minutes</strong>
                </p>
            </div>
        `;
    }
}

// Payment Method Selector Component
class PaymentMethodSelector extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <div class="space-y-3">
                <div class="flex items-center justify-between p-3 border border-blue-500 rounded-lg bg-blue-50">
                    <div class="flex items-center space-x-3">
                        <i data-feather="credit-card" class="text-blue-500"></i>
                        <div>
                            <p class="font-medium">Credit Card</p>
                            <p class="text-sm text-gray-600">**** **** **** 1234</p>
                        </div>
                    </div>
                    <i data-feather="check" class="text-blue-500"></i>
                </div>
                <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg cursor-pointer hover:border-blue-500">
                    <div class="flex items-center space-x-3">
                        <i data-feather="dollar-sign" class="text-gray-400"></i>
                        <div>
                            <p class="font-medium">Cash</p>
                            <p class="text-sm text-gray-600">Pay when delivered</p>
                        </div>
                    </div>
                </div>
                <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg cursor-pointer hover:border-blue-500">
                    <div class="flex items-center space-x-3">
                        <i data-feather="smartphone" class="text-gray-400"></i>
                        <div>
                            <p class="font-medium">Digital Wallet</p>
                            <p class="text-sm text-gray-600">Apple Pay, Google Pay</p>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }
}

// Cart Item List Component
class CartItemList extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <div class="space-y-4">
                <div class="flex justify-between items-center py-3 border-b border-gray-100">
                    <div class="flex items-center space-x-3">
                        <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                        <div>
                            <p class="font-medium">Margherita Pizza</p>
                            <p class="text-sm text-gray-600">Regular • Extra cheese</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-medium">$18.99</p>
                        <p class="text-sm text-gray-600">Qty: 1</p>
                    </div>
                </div>
                <div class="flex justify-between items-center py-3 border-b border-gray-100">
                    <div class="flex items-center space-x-3">
                        <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                        <div>
                            <p class="font-medium">Caesar Salad</p>
                            <p class="text-sm text-gray-600">Large • Extra dressing</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-medium">$12.50</p>
                        <p class="text-sm text-gray-600">Qty: 1</p>
                    </div>
                </div>
                <div class="flex justify-between items-center py-3">
                    <div class="flex items-center space-x-3">
                        <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                        <div>
                            <p class="font-medium">Garlic Bread</p>
                            <p class="text-sm text-gray-600">6 pieces</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-medium">$6.99</p>
                        <p class="text-sm text-gray-600">Qty: 1</p>
                    </div>
                </div>
            </div>
        `;
    }
}

// Promo Code Input Component
class PromoCodeInput extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <div class="flex space-x-3">
                <input type="text" placeholder="Enter promo code" 
                    class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <button class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                    Apply
                </button>
            </div>
        `;
    }
}

// Order Summary Component
class OrderSummary extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <h3 class="text-lg font-semibold mb-4">Order Summary</h3>
            <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                    <span>Subtotal</span>
                    <span>$38.48</span>
                </div>
                <div class="flex justify-between">
                    <span>Delivery Fee</span>
                    <span>$2.99</span>
                </div>
                <div class="flex justify-between">
                    <span>Service Fee</span>
                    <span>$1.50</span>
                </div>
                <div class="flex justify-between">
                    <span>Tax</span>
                    <span>$3.42</span>
                </div>
                <div class="flex justify-between text-green-600">
                    <span>Promo Discount</span>
                    <span>-$5.00</span>
                </div>
                <div class="border-t border-gray-200 pt-2 mt-2">
                    <div class="flex justify-between font-semibold text-lg">
                        <span>Total</span>
                        <span>$41.39</span>
                    </div>
                </div>
            </div>
        `;
    }
}

// Place Order Button Component
class PlaceOrderButton extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <button data-place-order class="w-full bg-green-500 text-white py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors flex items-center justify-center space-x-2">
                <i data-feather="shopping-bag"></i>
                <span>Place Order - $41.39</span>
            </button>
        `;
    }
}

// View Cart Button Component
class ViewCartButton extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <a href="your-cart.html" class="w-full border border-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors flex items-center justify-center space-x-2">
                <i data-feather="shopping-cart"></i>
                <span>View Cart</span>
            </a>
        `;
    }
}

// Support Button Component
class SupportButton extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <button class="w-full border border-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors flex items-center justify-center space-x-2">
                <i data-feather="help-circle"></i>
                <span>Contact Support</span>
            </button>
        `;
    }
}

// Live Map View Component
class LiveMapView extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <div class="bg-gray-100 rounded-lg h-48 flex items-center justify-center mb-4">
                <div class="text-center text-gray-500">
                    <i data-feather="map" class="w-8 h-8 mx-auto mb-2"></i>
                    <p>Live delivery tracking map</p>
                </div>
            </div>
        `;
    }
}

// Order Status Tracker Component
class OrderStatusTracker extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <div class="space-y-4">
                <div class="flex items-center space-x-3">
                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    <div>
                        <p class="font-medium text-sm">Order placed</p>
                        <p class="text-xs text-gray-500">2 minutes ago</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                    <div>
                        <p class="font-medium text-sm">Restaurant preparing</p>
                        <p class="text-xs text-gray-500">Estimated: 5 min</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                    <div>
                        <p class="font-medium text-sm">Driver pickup</p>
                        <p class="text-xs text-gray-500">Estimated: 15 min</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                    <div>
                        <p class="font-medium text-sm">Delivery</p>
                        <p class="text-xs text-gray-500">Estimated: 25 min</p>
                    </div>
                </div>
            </div>
        `;
    }
}

// Address Manager Link Component
class AddressManagerLink extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <a href="addresses.html" class="text-blue-500 hover:text-blue-600 text-sm flex items-center space-x-1">
                <i data-feather="edit-2" class="w-4 h-4"></i>
                <span>Manage</span>
            </a>
        `;
    }
}

// Order Confirmation Message Component
class OrderConfirmationMessage extends HTMLElement {
    connectedCallback() {
        this.innerHTML = `
            <div class="text-center">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i data-feather="check" class="text-green-500 w-8 h-8"></i>
                </div>
                <h3 class="text-xl font-semibold mb-2">Order Confirmed!</h3>
                <p class="text-gray-600 mb-4">Your order has been placed successfully and will arrive in 25-35 minutes.</p>
                <p class="text-sm text-gray-500 mb-6">Order #: PP-2024-789456</p>
                <div class="space-y-3">
                    <a href="order-status.html" class="block w-full bg-blue-500 text-white py-2 rounded-lg font-semibold hover:bg-blue-600 transition-colors">
                        Track Order
                    </a>
                    <button onclick="document.getElementById('confirmationModal').classList.add('hidden')" class="block w-full border border-gray-300 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-50 transition-colors">
                        Continue Shopping
                    </button>
                </div>
            </div>
        `;
    }
}

// Register all custom elements
customElements.define('search-bar', SearchBar);
customElements.define('profile-header', ProfileHeader);
customElements.define('settings-link', SettingsLink);
customElements.define('order-history-link', OrderHistoryLink);
customElements.define('payment-manager-link', PaymentManagerLink);
customElements.define('logout-button', LogoutButton);
customElements.define('restaurant-header', RestaurantHeader);
customElements.define('address-selector', AddressSelector);
customElements.define('estimated-arrival-time', EstimatedArrivalTime);
customElements.define('payment-method-selector', PaymentMethodSelector);
customElements.define('cart-item-list', CartItemList);
customElements.define('promo-code-input', PromoCodeInput);
customElements.define('order-summary', OrderSummary);
customElements.define('place-order-button', PlaceOrderButton);
customElements.define('view-cart-button', ViewCartButton);
customElements.define('support-button', SupportButton);
customElements.define('live-map-view', LiveMapView);
customElements.define('order-status-tracker', OrderStatusTracker);
customElements.define('address-manager-link', AddressManagerLink);
customElements.define('order-confirmation-message', OrderConfirmationMessage);
</script>